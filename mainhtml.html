<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>snow</title>
<link href="https://fonts.googleapis.com/css2?family=Geist+Mono:wght@300;400;500;600;700&family=Syne:wght@400;500;600;700;800&family=DM+Mono:ital,wght@0,300;0,400;0,500;1,300;1,400&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0d0f1a;
    --card: rgba(18,22,42,0.78);
    --border: rgba(180,200,255,0.12);
    --border-h: rgba(180,200,255,0.24);
    --text: #8eb8ee;
    --muted: #6680a8;
    --accent: #9ecff0;
    --accent2: #b3a4f0;
    --glow: rgba(158,207,240,0.14);
    --red: #e24e67;
    --green: #a8f0c6;
    --pastel-pink: #f0b8d8;
    --pastel-purple: #c4b0f0;
    --pastel-blue: #9ecff0;
    --pastel-mint: #a8e8d8;
    --pastel-peach: #f0d0b0;
  }
  *,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
  html,body{width:100%;height:100%;overflow:hidden;font-family:'DM Mono',monospace;background:var(--bg);color:var(--text);cursor:none}
  #bg-video{position:fixed;inset:0;width:100%;height:100%;object-fit:cover;z-index:0;display:none}
  #bg-canvas{position:fixed;inset:0;width:100%;height:100%;z-index:0}
  .bg-overlay{position:fixed;inset:0;background:
    radial-gradient(ellipse 65% 55% at 15% 15%,rgba(196,176,240,0.07) 0%,transparent 55%),
    radial-gradient(ellipse 55% 50% at 85% 85%,rgba(158,207,240,0.06) 0%,transparent 55%),
    radial-gradient(ellipse 40% 40% at 50% 50%,rgba(240,184,216,0.04) 0%,transparent 60%),
    linear-gradient(160deg,rgba(14,12,28,0.85) 0%,rgba(10,13,26,0.65) 50%,rgba(8,12,24,0.88) 100%);
    z-index:1;transition:opacity .5s}
  #scene{position:fixed;inset:0;z-index:2;display:flex;align-items:center;justify-content:center;perspective:1000px}
  .card-wrap{transform-style:preserve-3d;will-change:transform}

  /* CARD */
  .card{width:430px;background:var(--card);border:1px solid var(--border);border-radius:20px;backdrop-filter:blur(32px) saturate(180%);box-shadow:
    0 0 0 1px rgba(28, 114, 172, 0.842),
    0 40px 90px rgba(33, 103, 233, 0.178),
    0 0 80px var(--glow),
    inset 0 1px 0 rgb(58, 101, 165);
    overflow:hidden;animation:cardIn .8s cubic-bezier(.16,1,.3,1) both}
  @keyframes cardIn{from{opacity:0;transform:translateY(32px) scale(.96)}to{opacity:1;transform:none}}

  /* BANNER */
  .banner{height:76px;background:linear-gradient(135deg,rgba(29, 139, 212, 0.76) 0%,rgba(54, 135, 189, 0.555) 50%,rgba(76, 100, 209, 0.795) 100%);position:relative;overflow:hidden;border-bottom:1px solid var(--border)}
  .banner-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(12, 134, 216, 0.76) 1px,transparent 1px),linear-gradient(90deg,rgba(58, 103, 228, 0.432) 1px,transparent 1px);background-size:26px 26px;animation:gridSlide 1s linear infinite}
  @keyframes gridSlide{from{background-position:0 0}to{background-position:26px 26px}}
  .banner-glow{position:absolute;inset:0;background:radial-gradient(ellipse at 50% 170%,rgba(10, 192, 247, 0.623) 0%,transparent 55%)}
  .banner-orb{position:absolute;border-radius:50%;filter:blur(30px)}

  @keyframes orbFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(6px)}}

  /* PROFILE */
  .profile-wrap{padding:0 22px 20px;position:relative}
  .avatar-outer{position:absolute;top:-44px;left:22px;width:84px;height:84px;cursor:pointer}
  .avatar-ring{position:absolute;inset:-3px;border-radius:50%;background:conic-gradient(#cb0adde5,rgb(197, 13, 188),#c4b0f0,#091fe0,#eb18eb);animation:ringRotate 5s linear infinite;z-index:0}
  @keyframes ringRotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
  .avatar-ring::before{content:'';position:absolute;inset:2px;border-radius:50%;background:#0e1220}
  .avatar-img{position:relative;z-index:1;width:84px;height:84px;border-radius:50%;border:2.5px solid #0e1220;background:linear-gradient(135deg,#131a30,#1e2445);display:flex;align-items:center;justify-content:center;overflow:hidden;transition:transform .3s;font-size:.65rem;font-family:'Geist Mono',monospace;color:var(--muted);letter-spacing:1px;text-transform:uppercase}
  .avatar-img:hover{transform:scale(1.06)}
  .avatar-img img{width:100%;height:100%;object-fit:cover;border-radius:50%}
  .avatar-status{position:absolute;bottom:4px;right:4px;width:14px;height:14px;border-radius:50%;background:var(--red);border:2.5px solid #0e1220;z-index:2;transition:background .3s;box-shadow:0 0 6px currentColor}
  .profile-header{padding-top:52px;margin-bottom:10px}
  .username-row{display:flex;align-items:center;gap:8px;flex-wrap:wrap;margin-bottom:4px}
  .username{font-family:'Syne',sans-serif;font-size:1.38rem;font-weight:800;color:rgba(230,240,255,0.95);letter-spacing:-.02em;line-height:1}
  .cursor-blink{display:inline-block;width:2px;height:1.1em;background:var(--accent);margin-left:1px;vertical-align:text-top;animation:blink 1s step-end infinite;border-radius:1px}
  @keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
  .badges{display:flex;gap:3px;flex-wrap:wrap;align-items:center}
  .badge{display:inline-flex;align-items:center;height:19px;padding:0 8px;border-radius:5px;background:rgba(158,207,240,0.07);border:1px solid rgba(158,207,240,0.14);font-size:.57rem;font-family:'Geist Mono',monospace;letter-spacing:1px;text-transform:uppercase;color:rgba(158,207,240,0.65);cursor:default;transition:all .18s;user-select:none;white-space:nowrap}
  .badge:hover{background:rgba(44, 133, 206, 0.774);border-color:rgba(196,176,240,0.3);color:var(--accent2);transform:translateY(-2px)}
  .status-row{display:flex;align-items:center;gap:6px;margin-bottom:10px}
  .status-dot{width:7px;height:7px;border-radius:50%;background:var(--red);flex-shrink:0;box-shadow:0 0 6px currentColor;transition:background .3s}
  .status-text{font-size:.6rem;color:var(--muted);font-family:'Geist Mono',monospace;letter-spacing:2.5px;text-transform:uppercase}
  .bio{font-size:.8rem;color:rgba(94, 147, 221, 0.651);line-height:1.65;min-height:24px;margin-bottom:16px;font-family:'DM Mono',monospace}
  .bio-cursor{display:inline-block;width:1.5px;height:.95em;background:var(--pastel-purple);margin-left:1px;vertical-align:middle;border-radius:1px;animation:blink .9s step-end infinite}
  .divider{height:1px;background:linear-gradient(90deg,transparent,rgba(158,207,240,0.14),rgba(196,176,240,0.14),transparent);margin-bottom:16px}
  .socials{display:flex;gap:7px;justify-content:center;margin-bottom:16px}
  .social-btn{height:29px;padding:0 11px;border-radius:8px;background:rgba(255,255,255,0.03);border:1px solid var(--border);display:flex;align-items:center;cursor:none;transition:all .22s cubic-bezier(.34,1.56,.64,1);color:var(--muted);text-decoration:none;font-family:'Geist Mono',monospace;font-size:.57rem;letter-spacing:1.5px;text-transform:uppercase;gap:6px;white-space:nowrap}
  .social-btn:hover{background:rgba(158,207,240,0.09);border-color:rgba(158,207,240,0.26);color:var(--accent);transform:translateY(-3px) scale(1.05);box-shadow:0 6px 18px rgba(158,207,240,0.1)}
  .social-btn svg{width:11px;height:11px;fill:currentColor;flex-shrink:0}
  .view-count{display:flex;align-items:center;gap:6px;font-family:'Geist Mono',monospace;font-size:.6rem;color:var(--muted);padding:6px 0 0;letter-spacing:1px}
  .view-count-dot{width:5px;height:5px;border-radius:50%;background:var(--pastel-purple);opacity:.7;flex-shrink:0}

  /* MUSIC */
  .music-section{padding:14px 22px 18px;border-top:1px solid var(--border);background:rgba(0,0,0,0.15)}
  .music-label{font-family:'Geist Mono',monospace;font-size:.55rem;letter-spacing:3px;text-transform:uppercase;color:var(--muted);margin-bottom:10px;display:flex;align-items:center;gap:8px}
  .music-label::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,var(--border),transparent)}
  .music-eq{display:flex;align-items:flex-end;gap:2px;height:14px}
  .eq-b{width:2.5px;border-radius:1px;min-height:2px;transition:height .12s ease}
  .eq-b:nth-child(1){background:#9ecff0}
  .eq-b:nth-child(2){background:#b3a4f0}
  .eq-b:nth-child(3){background:#f0b8d8}
  .eq-b:nth-child(4){background:#c4b0f0}
  .eq-b:nth-child(5){background:#a8e8d8}
  .eq-b:nth-child(6){background:#9ecff0}
  .eq-b:nth-child(7){background:#f0d0b0}
  .now-playing-row{display:flex;align-items:center;gap:12px;margin-bottom:12px}
  .album{width:50px;height:50px;border-radius:10px;background:linear-gradient(135deg,#111830,#1c2248);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .3s;overflow:hidden;position:relative}
  .album.playing{animation:albumPulse 2s ease-in-out infinite alternate;border-color:rgba(196,176,240,0.32)}
  .album img.album-cover{width:100%;height:100%;object-fit:cover;border-radius:9px}
  .album-initials{font-family:'Syne',sans-serif;font-size:.6rem;font-weight:800;color:rgba(158,207,240,0.38);letter-spacing:.5px;text-transform:uppercase;text-align:center;padding:4px;line-height:1.2}
  @keyframes albumPulse{from{box-shadow:0 0 0 0 rgba(196,176,240,0.22)}to{box-shadow:0 0 22px 4px rgba(196,176,240,0)}}
  .track-info{flex:1;min-width:0}
  .track-title{font-family:'Syne',sans-serif;font-size:.86rem;font-weight:700;color:rgba(218,232,255,0.9);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:1px}
  .track-artist{font-family:'Geist Mono',monospace;font-size:.62rem;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;letter-spacing:.5px}
  .track-album{font-family:'DM Mono',monospace;font-size:.57rem;color:rgba(100,120,160,0.55);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:1px;font-style:italic}
  .prog-wrap{position:relative;margin-bottom:10px;cursor:none}
  .prog-track{height:3px;background:rgba(255,255,255,0.06);border-radius:2px;overflow:hidden}
  .prog-fill{height:100%;width:0%;background:linear-gradient(90deg,#9ecff0,#c4b0f0,#f0b8d8);border-radius:2px;transition:width .15s linear;position:relative}
  .prog-fill::after{content:'';position:absolute;right:-4px;top:-4px;width:10px;height:10px;background:var(--accent);border-radius:50%;opacity:0;transition:opacity .2s;box-shadow:0 0 8px var(--accent)}
  .prog-wrap:hover .prog-fill::after{opacity:1}
  .prog-times{display:flex;justify-content:space-between;font-family:'Geist Mono',monospace;font-size:.55rem;color:var(--muted);margin-top:4px;letter-spacing:.5px}
  .controls{display:flex;align-items:center;justify-content:center;gap:6px;margin-bottom:12px}
  .ctrl{width:32px;height:32px;border-radius:8px;background:rgba(255,255,255,0.03);border:1px solid var(--border);color:var(--muted);display:flex;align-items:center;justify-content:center;cursor:none;transition:all .18s;user-select:none}
  .ctrl:hover{background:rgba(158,207,240,0.08);color:var(--accent);border-color:rgba(158,207,240,0.22)}
  .ctrl.on{color:var(--pastel-purple);border-color:rgba(196,176,240,0.33);background:rgba(196,176,240,0.09)}
  .ctrl.pp{width:40px;height:40px;border-radius:50%;background:rgba(158,207,240,0.1);border-color:rgba(158,207,240,0.28);color:var(--accent)}
  .ctrl.pp:hover{background:rgba(158,207,240,0.18);box-shadow:0 0 24px rgba(158,207,240,0.18);transform:scale(1.08)}
  .ctrl svg{width:13px;height:13px;fill:currentColor}
  .song-selector{display:flex;gap:5px;justify-content:center;margin-bottom:12px;flex-wrap:wrap}
  .song-dot{min-width:28px;height:21px;border-radius:6px;background:rgba(255,255,255,0.03);border:1px solid var(--border);font-family:'Geist Mono',monospace;font-size:.57rem;font-weight:600;color:var(--muted);display:flex;align-items:center;justify-content:center;cursor:none;transition:all .18s cubic-bezier(.34,1.56,.64,1);padding:0 7px;user-select:none;letter-spacing:1px}
  .song-dot:hover{border-color:rgba(158,207,240,0.26);color:var(--accent);transform:translateY(-2px)}
  .song-dot.active{background:rgba(60,100,160,0.3);border-color:rgba(158,207,240,0.38);color:var(--accent);box-shadow:0 0 12px rgba(158,207,240,0.12)}
  .sliders-row{display:flex;align-items:center;gap:14px}
  .slider-group{display:flex;align-items:center;gap:8px;flex:1}
  .slider-label{font-family:'Geist Mono',monospace;font-size:.52rem;letter-spacing:1.5px;text-transform:uppercase;color:var(--muted);flex-shrink:0;cursor:none;transition:color .15s;user-select:none;min-width:22px;text-align:center}
  .slider-label:hover{color:var(--accent)}
  input[type=range].custom-slider{-webkit-appearance:none;width:100%;height:3px;background:rgba(255,255,255,0.07);border-radius:2px;outline:none;cursor:none}
  input[type=range].custom-slider::-webkit-slider-thumb{-webkit-appearance:none;width:11px;height:11px;background:var(--accent);border-radius:50%;cursor:none;transition:transform .15s;box-shadow:0 0 8px rgba(158,207,240,0.45)}
  input[type=range].custom-slider:hover::-webkit-slider-thumb{transform:scale(1.3)}

  /* ─── CUSTOM CURSOR ─── */
  #cursor-dot{position:fixed;top:0;left:0;width:7px;height:7px;border-radius:50%;background:var(--pastel-blue);pointer-events:none;z-index:9999;transform:translate(-50%,-50%);mix-blend-mode:screen;box-shadow:0 0 8px var(--pastel-blue)}
  #cursor-ring{position:fixed;top:0;left:0;width:26px;height:26px;border-radius:50%;border:1.5px solid rgba(158,207,240,0.4);pointer-events:none;z-index:9998;transform:translate(-50%,-50%)}
  .trail-dot{position:fixed;pointer-events:none;z-index:9997;border-radius:50%;transform:translate(-50%,-50%);mix-blend-mode:screen}

  /* ─── OVERLAYS ─── */
  .overlay-base{position:fixed;inset:0;z-index:50;display:none;align-items:center;justify-content:center;background:rgba(5,7,18,0.75);backdrop-filter:blur(18px)}
  .overlay-base.open{display:flex}
  @keyframes panelIn{from{opacity:0;transform:scale(.95) translateY(10px)}to{opacity:1;transform:none}}

  .pw-box{width:320px;background:rgba(12,15,30,0.98);border:1px solid var(--border-h);border-radius:20px;padding:34px 28px;box-shadow:0 30px 80px rgba(0,0,0,0.8),0 0 40px rgba(196,176,240,0.07);animation:panelIn .3s cubic-bezier(.16,1,.3,1);text-align:center}
  .pw-lock{font-family:'Geist Mono',monospace;font-size:.6rem;letter-spacing:4px;text-transform:uppercase;color:var(--muted);margin-bottom:14px;display:flex;align-items:center;justify-content:center;gap:8px}
  .pw-lock::before,.pw-lock::after{content:'';flex:1;height:1px;background:var(--border)}
  .pw-title{font-family:'Syne',sans-serif;font-size:1.05rem;font-weight:800;margin-bottom:4px;color:rgba(220,235,255,0.9)}
  .pw-sub{font-family:'Geist Mono',monospace;font-size:.6rem;color:var(--muted);letter-spacing:1.5px;margin-bottom:22px;text-transform:uppercase}
  .pw-error{font-family:'Geist Mono',monospace;font-size:.64rem;color:var(--red);margin-bottom:8px;min-height:16px;letter-spacing:.5px}
  .pw-input{width:100%;padding:11px 14px;background:rgba(255,255,255,0.04);border:1px solid var(--border-h);border-radius:10px;color:var(--text);font-family:'Geist Mono',monospace;font-size:.9rem;letter-spacing:3px;outline:none;text-align:center;transition:border-color .2s,box-shadow .2s;margin-bottom:10px;cursor:none}
  .pw-input:focus{border-color:rgba(196,176,240,0.4);box-shadow:0 0 0 3px rgba(196,176,240,0.07)}
  .pw-input.shake{animation:shake .4s cubic-bezier(.36,.07,.19,.97);border-color:rgba(240,168,180,0.55)!important}
  @keyframes shake{10%,90%{transform:translateX(-2px)}20%,80%{transform:translateX(4px)}30%,50%,70%{transform:translateX(-4px)}40%,60%{transform:translateX(4px)}}
  .pw-btn{width:100%;padding:11px;background:rgba(196,176,240,0.1);border:1px solid rgba(196,176,240,0.24);border-radius:10px;color:var(--accent2);font-family:'Syne',sans-serif;font-size:.84rem;font-weight:700;letter-spacing:2px;text-transform:uppercase;cursor:none;transition:all .2s;margin-bottom:8px}
  .pw-btn:hover{background:rgba(196,176,240,0.18);box-shadow:0 0 22px rgba(196,176,240,0.12)}
  .pw-cancel{font-family:'Geist Mono',monospace;font-size:.64rem;color:var(--muted);cursor:none;transition:color .15s;letter-spacing:2px;text-transform:uppercase;display:inline-block;margin-top:4px}
  .pw-cancel:hover{color:var(--text)}

  .settings-panel{width:460px;max-height:90vh;overflow-y:auto;background:rgba(12,15,30,0.98);border:1px solid var(--border-h);border-radius:20px;padding:28px;box-shadow:0 30px 80px rgba(0,0,0,0.8),0 0 40px rgba(158,207,240,0.05);animation:panelIn .3s cubic-bezier(.16,1,.3,1)}
  .settings-panel::-webkit-scrollbar{width:4px}
  .settings-panel::-webkit-scrollbar-thumb{background:rgba(196,176,240,0.18);border-radius:2px}
  .sp-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:22px}
  .sp-title{font-family:'Syne',sans-serif;font-size:1.08rem;font-weight:800;letter-spacing:-.02em;color:rgba(220,235,255,0.9)}
  .sp-close{width:28px;height:28px;border-radius:7px;background:rgba(255,255,255,0.03);border:1px solid var(--border);color:var(--muted);display:flex;align-items:center;justify-content:center;cursor:none;font-family:'Geist Mono',monospace;font-size:.66rem;transition:all .15s}
  .sp-close:hover{background:rgba(240,168,180,0.1);border-color:rgba(240,168,180,0.28);color:var(--red)}
  .sp-section{margin-bottom:18px}
  .sp-section-title{font-family:'Geist Mono',monospace;font-size:.55rem;letter-spacing:3px;text-transform:uppercase;color:var(--muted);margin-bottom:8px;display:flex;align-items:center;gap:8px}
  .sp-section-title::after{content:'';flex:1;height:1px;background:var(--border)}
  .sp-input{width:100%;padding:9px 12px;background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:9px;color:var(--text);font-family:'DM Mono',monospace;font-size:.8rem;outline:none;transition:border-color .2s;cursor:none}
  .sp-input:focus{border-color:rgba(196,176,240,0.32)}
  .sp-input::placeholder{color:rgba(102,128,168,0.38)}
  .sp-row{display:flex;gap:8px}
  .sp-row .sp-input{flex:1}
  .sp-add-btn{padding:9px 14px;background:rgba(196,176,240,0.09);border:1px solid rgba(196,176,240,0.2);border-radius:9px;color:var(--accent2);font-family:'Geist Mono',monospace;font-size:.63rem;font-weight:600;letter-spacing:1px;text-transform:uppercase;cursor:none;white-space:nowrap;transition:all .15s}
  .sp-add-btn:hover{background:rgba(196,176,240,0.16)}
  .sp-save{width:100%;padding:12px;background:linear-gradient(135deg,rgba(158,207,240,0.1),rgba(196,176,240,0.1),rgba(240,184,216,0.07));border:1px solid rgba(196,176,240,0.22);border-radius:10px;color:var(--accent2);font-family:'Geist Mono',monospace;font-size:.72rem;font-weight:600;letter-spacing:3px;text-transform:uppercase;cursor:none;transition:all .2s;margin-top:4px}
  .sp-save:hover{background:linear-gradient(135deg,rgba(158,207,240,0.18),rgba(196,176,240,0.18),rgba(240,184,216,0.12));box-shadow:0 0 28px rgba(196,176,240,0.12);transform:translateY(-1px)}
  .sp-upload{width:100%;padding:14px;border:1px dashed rgba(196,176,240,0.16);border-radius:10px;text-align:center;cursor:none;transition:all .2s;background:transparent;color:var(--muted);font-family:'Geist Mono',monospace;font-size:.63rem;letter-spacing:1px;text-transform:uppercase}
  .sp-upload:hover{border-color:rgba(196,176,240,0.32);color:var(--accent2);background:rgba(196,176,240,0.04)}
  .sp-upload span{display:block;color:var(--accent2);font-weight:600;margin-bottom:2px;font-size:.66rem;letter-spacing:2px}
  .song-list-sp{display:flex;flex-direction:column;gap:4px;max-height:180px;overflow-y:auto;margin-top:8px}
  .song-list-sp::-webkit-scrollbar{width:3px}
  .song-list-sp::-webkit-scrollbar-thumb{background:rgba(196,176,240,0.15);border-radius:2px}
  .song-sp-row{display:flex;align-items:center;gap:8px;padding:8px 10px;background:rgba(255,255,255,0.02);border-radius:8px;border:1px solid var(--border)}
  .song-sp-num{font-family:'Geist Mono',monospace;font-size:.57rem;color:var(--muted);width:16px;flex-shrink:0}
  .song-sp-info{flex:1;min-width:0}
  .song-sp-title{font-family:'Syne',sans-serif;font-size:.75rem;font-weight:700;color:rgba(200,220,255,0.78);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .song-sp-meta{font-family:'Geist Mono',monospace;font-size:.57rem;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:1px}
  .song-sp-rm{background:none;border:none;color:rgba(240,168,180,0.4);cursor:none;font-family:'Geist Mono',monospace;font-size:.57rem;padding:2px 6px;border-radius:4px;transition:all .15s;letter-spacing:1px;text-transform:uppercase;flex-shrink:0}
  .song-sp-rm:hover{color:var(--red);background:rgba(240,168,180,0.07)}
  .song-add-form{background:rgba(255,255,255,0.02);border:1px solid var(--border);border-radius:10px;padding:12px;margin-top:8px}
  .song-form-row-with-img{display:flex;gap:10px;align-items:flex-end}
  .sp-field-label{font-family:'Geist Mono',monospace;font-size:.52rem;letter-spacing:2px;text-transform:uppercase;color:var(--muted);margin-bottom:4px;display:block}
  .song-cover-preview{width:44px;height:44px;border-radius:8px;background:linear-gradient(135deg,#101828,#1a2040);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-family:'Geist Mono',monospace;font-size:.48rem;color:var(--muted);cursor:none;overflow:hidden;flex-shrink:0;transition:all .2s;text-transform:uppercase;letter-spacing:.5px;text-align:center}
  .song-cover-preview:hover{border-color:rgba(196,176,240,0.28);color:var(--accent2)}
  .song-cover-preview img{width:100%;height:100%;object-fit:cover;border-radius:7px}
  .badge-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:6px;margin-top:6px}
  .badge-slot{display:flex;flex-direction:column;align-items:center;gap:4px;position:relative}
  .badge-slot-preview{width:100%;height:24px;border-radius:6px;background:rgba(255,255,255,0.03);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-family:'Geist Mono',monospace;font-size:.56rem;letter-spacing:1px;text-transform:uppercase;color:var(--muted)}
  .badge-slot-input{width:100%;padding:4px 8px;background:rgba(255,255,255,0.02);border:1px solid var(--border);border-radius:6px;color:var(--text);font-size:.7rem;outline:none;font-family:'Geist Mono',monospace;letter-spacing:.5px;transition:border-color .2s;cursor:none}
  .badge-slot-input:focus{border-color:rgba(196,176,240,0.32)}
  .badge-rm-btn{position:absolute;top:-4px;right:-4px;width:14px;height:14px;border-radius:50%;background:rgba(240,168,180,0.6);border:none;color:white;font-family:'Geist Mono',monospace;font-size:.48rem;cursor:none;display:flex;align-items:center;justify-content:center;transition:all .15s}
  .badge-rm-btn:hover{background:var(--red);transform:scale(1.2)}
  .badges-row-controls{display:flex;gap:6px;margin-top:8px}
  .badge-ctrl-btn{flex:1;padding:7px;background:rgba(255,255,255,0.02);border:1px solid var(--border);border-radius:8px;color:var(--muted);font-family:'Geist Mono',monospace;font-size:.58rem;letter-spacing:1.5px;text-transform:uppercase;cursor:none;transition:all .15s}
  .badge-ctrl-btn:hover{background:rgba(196,176,240,0.08);color:var(--accent2);border-color:rgba(196,176,240,0.18)}
  .icon-edit-row{display:flex;align-items:center;gap:8px;padding:8px 10px;background:rgba(255,255,255,0.02);border:1px solid var(--border);border-radius:9px;margin-bottom:6px}
  .icon-edit-label{font-family:'Geist Mono',monospace;font-size:.56rem;color:var(--muted);letter-spacing:1.5px;flex-shrink:0;width:72px;text-transform:uppercase}
  .icon-edit-preview{font-family:'Geist Mono',monospace;font-size:.68rem;flex-shrink:0;width:40px;text-align:center;color:var(--accent2);letter-spacing:.5px}
  .icon-edit-input{flex:1;padding:5px 8px;background:rgba(255,255,255,0.03);border:1px solid var(--border);border-radius:7px;color:var(--text);font-size:.78rem;font-family:'Geist Mono',monospace;outline:none;transition:border-color .2s;cursor:none}
  .icon-edit-input:focus{border-color:rgba(196,176,240,0.32)}
  .icon-edit-input::placeholder{color:rgba(102,128,168,0.33)}

  .gear-btn{position:fixed;bottom:20px;right:20px;height:30px;padding:0 13px;border-radius:8px;background:rgba(255,255,255,0.03);border:1px solid var(--border);color:var(--muted);display:flex;align-items:center;gap:6px;cursor:none;font-family:'Geist Mono',monospace;font-size:.56rem;letter-spacing:2px;text-transform:uppercase;z-index:10;transition:all .2s;backdrop-filter:blur(10px)}
  .gear-btn:hover{color:var(--accent);border-color:rgba(158,207,240,0.26)}
  .gear-btn svg{width:10px;height:10px;fill:currentColor;transition:transform .4s}
  .gear-btn:hover svg{transform:rotate(90deg)}

  .toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%);padding:9px 20px;background:rgba(12,15,30,0.97);border:1px solid rgba(196,176,240,0.22);border-radius:10px;font-family:'Geist Mono',monospace;font-size:.68rem;color:var(--accent2);z-index:200;pointer-events:none;backdrop-filter:blur(12px);white-space:nowrap;animation:toastIn .3s ease,toastOut .3s ease 2s forwards;letter-spacing:1px}
  @keyframes toastIn{from{opacity:0;transform:translateX(-50%) translateY(8px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}
  @keyframes toastOut{to{opacity:0;transform:translateX(-50%) translateY(6px)}}

  #avatar-file,#sp-bgfile,#sp-songfiles,#song-cover-file{display:none}

  /* ─── DISCORD PRESENCE ─── */
  .presence-section{padding:10px 22px 14px;border-top:1px solid var(--border);background:rgba(0,0,0,0.1)}
  .presence-label{font-family:'Geist Mono',monospace;font-size:.55rem;letter-spacing:3px;text-transform:uppercase;color:var(--muted);margin-bottom:8px;display:flex;align-items:center;gap:8px}
  .presence-label::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,var(--border),transparent)}
  .presence-dc-dot{width:5px;height:5px;border-radius:50%;background:var(--muted);flex-shrink:0;transition:background .3s;box-shadow:0 0 5px currentColor}

  /* activity row */
  .activity-row{display:flex;align-items:center;gap:10px;padding:8px 10px;background:rgba(255,255,255,0.025);border:1px solid var(--border);border-radius:10px;min-height:46px;transition:all .3s}
  .activity-row.hidden{display:none}
  .activity-img-wrap{width:40px;height:40px;border-radius:8px;flex-shrink:0;position:relative;background:linear-gradient(135deg,#111830,#1c2248);border:1px solid var(--border);overflow:visible}
  .activity-img{width:40px;height:40px;border-radius:8px;object-fit:cover;display:block}
  .activity-img-small{position:absolute;bottom:-4px;right:-4px;width:16px;height:16px;border-radius:50%;border:2px solid #0d0f1a;object-fit:cover;background:#111830}
  .activity-info{flex:1;min-width:0}
  .activity-name{font-family:'Syne',sans-serif;font-size:.78rem;font-weight:700;color:rgba(218,232,255,0.88);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:1px}
  .activity-detail{font-family:'Geist Mono',monospace;font-size:.6rem;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;letter-spacing:.3px}
  .activity-state{font-family:'DM Mono',monospace;font-size:.57rem;color:rgba(100,120,160,0.55);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:1px;font-style:italic}

  /* spotify progress */
  .spotify-prog-wrap{margin-top:6px;cursor:default}
  .spotify-prog-track{height:2px;background:rgba(255,255,255,0.07);border-radius:2px}
  .spotify-prog-fill{height:100%;width:0%;background:linear-gradient(90deg,#1db954,#1ed760);border-radius:2px;transition:width .5s linear}
  .spotify-prog-times{display:flex;justify-content:space-between;font-family:'Geist Mono',monospace;font-size:.52rem;color:var(--muted);margin-top:3px}

  /* no activity */
  .no-activity{font-family:'Geist Mono',monospace;font-size:.6rem;color:rgba(102,128,168,0.4);letter-spacing:1px;text-transform:uppercase;text-align:center;padding:6px 0}
  select.sp-input option{background:#0c0f1e;color:var(--text)}
  .small-note{font-family:'Geist Mono',monospace;font-size:.54rem;color:var(--muted);letter-spacing:.5px;opacity:.6;margin-top:4px}
</style>
</head>
<body>

<div id="cursor-dot"></div>
<div id="cursor-ring"></div>

<video id="bg-video" autoplay loop muted playsinline></video>
<canvas id="bg-canvas"></canvas>
<div class="bg-overlay"></div>

<div id="scene">
  <div class="card-wrap" id="card-wrap">
  <div class="card">
    <div class="banner">
      <div class="banner-grid"></div>
      <div class="banner-glow"></div>
      <div class="banner-orb b1"></div>
      <div class="banner-orb b2"></div>
      <div class="banner-orb b3"></div>
    </div>
    <div class="profile-wrap">
      <div class="avatar-outer" id="avatar-outer">
        <div class="avatar-ring"></div>
        <div class="avatar-img" id="avatar-el">
          <img id="avatar-img-el" src="" alt="" style="display:none">
          <span id="avatar-fallback">pfp</span>
        </div>
        <div class="avatar-status" id="status-dot"></div>
      </div>
      <input type="file" id="avatar-file" accept="image/*" onchange="setAvatar(event)">
      <div class="profile-header">
        <div class="username-row">
          <span class="username" id="username-el">twistedtbh<span class="cursor-blink"></span>
          <div class="badges" id="badges-el">
            <span class="badge">owner</span><span class="badge">mod</span><span class="badge">vip</span><span class="badge">pro</span>
          </div>
        </div>
        <div class="status-row">
          <div class="status-dot" id="status-dot2"></div>
          <span class="status-text" id="status-text-el">offline</span>
        </div>
        <div class="bio"><span id="bio-text"></span><span class="bio-cursor"></span></div>
      </div>
      <div class="divider"></div>
      <div class="socials">
        <a class="social-btn" href="#" id="s-github"><svg viewBox="0 0 24 24"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.3 3.44 9.8 8.2 11.37.6.11.82-.26.82-.58l-.01-2.03c-3.34.73-4.04-1.61-4.04-1.61-.54-1.38-1.33-1.75-1.33-1.75-1.09-.74.08-.73.08-.73 1.2.09 1.84 1.24 1.84 1.24 1.07 1.83 2.8 1.3 3.49 1 .11-.78.42-1.3.76-1.6-2.66-.3-5.46-1.33-5.46-5.93 0-1.31.47-2.38 1.24-3.22-.12-.3-.54-1.52.12-3.17 0 0 1.01-.32 3.3 1.23a11.5 11.5 0 0 1 3-.4c1.02 0 2.04.13 3 .4 2.28-1.55 3.29-1.23 3.29-1.23.66 1.65.24 2.87.12 3.17.77.84 1.24 1.91 1.24 3.22 0 4.61-2.8 5.63-5.48 5.92.43.37.81 1.1.81 2.22l-.01 3.29c0 .32.21.7.82.58C20.56 21.8 24 17.3 24 12c0-6.63-5.37-12-12-12z"/></svg>gh</a>
        <a class="social-btn" href="#" id="s-discord"><svg viewBox="0 0 24 24"><path d="M20.317 4.37a19.79 19.79 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057c.002.022.015.043.032.054a19.9 19.9 0 0 0 5.993 3.03.077.077 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/></svg>dc</a>
        <a class="social-btn" href="#" id="s-twitter"><svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-4.714-6.231-5.401 6.231H2.746l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>x</a>
        <a class="social-btn" href="#" id="s-tiktok"><svg viewBox="0 0 24 24"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-2.88 2.5 2.89 2.89 0 0 1-2.89-2.89 2.89 2.89 0 0 1 2.89-2.89c.28 0 .54.04.79.1V9.01a6.33 6.33 0 0 0-.79-.05 6.34 6.34 0 0 0-6.34 6.34 6.34 6.34 0 0 0 6.34 6.34 6.34 6.34 0 0 0 6.33-6.34V8.69a8.26 8.26 0 0 0 4.84 1.55V6.79a4.85 4.85 0 0 1-1.07-.1z"/></svg>tt</a>
      </div>
      <div class="view-count"><div class="view-count-dot"></div><span id="view-num">182,310</span> views</div>
    </div>
    <div class="music-section">
      <div class="music-label"><div class="music-eq" id="eq-el"></div>now playing</div>
      <div class="now-playing-row">
        <div class="album" id="album-art-el">
          <img id="album-cover-display" class="album-cover" src="" style="display:none" alt="">
          <div class="album-initials" id="album-initials-el">--</div>
        </div>
        <div class="track-info">
          <div class="track-title" id="track-title-el">no track loaded</div>
          <div class="track-artist" id="track-artist-el">open settings to add songs</div>
          <div class="track-album" id="track-album-el"></div>
        </div>
      </div>
      <div class="prog-wrap" id="prog-wrap" onclick="seekAudio(event,this)">
        <div class="prog-track"><div class="prog-fill" id="prog-fill"></div></div>
        <div class="prog-times"><span id="t-cur">0:00</span><span id="t-total">0:00</span></div>
      </div>
      <div class="controls">
        <div class="ctrl" id="shuffle-c" onclick="toggleShuffle()"><svg viewBox="0 0 24 24"><path d="M16 3h5v5l-1.8-1.8-4.5 4.5-1.4-1.4 4.5-4.5L16 3zm-9.4.6L10 7l-3 3-1.4-1.4L9 5.4 7.4 3.8l-.8-.8zm1.5 10.4l1.4 1.4-4.5 4.5L6.8 21H2v-5l1.8 1.8 4.3-3.8zm7.3-.4l4.5 4.5 1.1-1.1V22h-5l1.2-1.2-4.5-4.5 1.7-1.7z"/></svg></div>
        <div class="ctrl" onclick="prevTrack()"><svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"/></svg></div>
        <div class="ctrl pp" id="pp-c" onclick="togglePlay()"><svg id="pp-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg></div>
        <div class="ctrl" onclick="nextTrack()"><svg viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zm2-8.14L11.03 12 8 14.14V9.86zM16 6h2v12h-2z"/></svg></div>
        <div class="ctrl" id="repeat-c" onclick="toggleRepeat()"><svg viewBox="0 0 24 24"><path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z"/></svg></div>
      </div>
      <div class="song-selector" id="song-selector"></div>
      <div class="sliders-row">
        <div class="slider-group"><span class="slider-label" id="vol-label" onclick="toggleMute()">vol</span><input type="range" class="custom-slider" id="vol-sl" min="0" max="100" value="70" oninput="setVol(this.value)"></div>
        <div class="slider-group"><span class="slider-label" id="bright-label">dim</span><input type="range" class="custom-slider" id="bright-sl" min="0" max="100" value="50" oninput="setBrightness(this.value)"></div>
      </div>
    </div>

    <!-- DISCORD PRESENCE (Lanyard) -->
    <div class="presence-section" id="presence-section">
      <div class="presence-label">
        <div class="presence-dc-dot" id="presence-dc-dot"></div>
        discord
      </div>
      <!-- custom status text -->
      <div class="activity-row hidden" id="act-custom" style="margin-bottom:5px;background:transparent;border-color:transparent;padding:0 2px 3px">
        <div class="activity-detail" id="act-custom-text" style="font-size:.68rem;color:rgba(180,200,240,0.5);font-style:italic"></div>
      </div>
      <!-- spotify -->
      <div class="activity-row hidden" id="act-spotify" style="margin-bottom:6px">
        <div class="activity-img-wrap">
          <img class="activity-img" id="spotify-album-art" src="" alt="">
          <img class="activity-img-small" id="spotify-icon" src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Spotify_icon.svg/232px-Spotify_icon.svg.png" alt="">
        </div>
        <div class="activity-info">
          <div class="activity-name" id="spotify-song"></div>
          <div class="activity-detail" id="spotify-artist"></div>
          <div class="spotify-prog-wrap">
            <div class="spotify-prog-track"><div class="spotify-prog-fill" id="spotify-prog"></div></div>
            <div class="spotify-prog-times"><span id="spotify-t-cur">0:00</span><span id="spotify-t-total">0:00</span></div>
          </div>
        </div>
      </div>
      <!-- game/app activity -->
      <div class="activity-row hidden" id="act-game">
        <div class="activity-img-wrap" id="act-game-imgwrap" style="display:flex;align-items:center;justify-content:center">
          <img class="activity-img" id="act-game-img" src="" alt="" style="display:none">
          <span id="act-game-initials" style="font-family:'Geist Mono',monospace;font-size:.58rem;color:var(--muted);text-transform:uppercase;letter-spacing:.5px;text-align:center;line-height:1.2;padding:3px"></span>
        </div>
        <div class="activity-info">
          <div class="activity-name" id="act-game-name"></div>
          <div class="activity-detail" id="act-game-detail"></div>
          <div class="activity-state" id="act-game-state"></div>
        </div>
      </div>
      <!-- no activity fallback -->
      <div class="no-activity" id="act-idle">no activity</div>
    </div>

  </div><!-- end .card -->
  </div><!-- end .card-wrap -->

<button class="gear-btn" onclick="requestAccess()">
  <svg viewBox="0 0 24 24"><path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/></svg>
  settings
</button>

<div class="overlay-base" id="pw-overlay">
  <div class="pw-box">
    <div class="pw-lock">access</div>
    <div class="pw-title">Owner Portal</div>
    <div class="pw-sub">enter password to edit</div>
    <div class="pw-error" id="pw-error"></div>
    <input class="pw-input" id="pw-input" type="password" placeholder="password" maxlength="32" onkeydown="if(event.key==='Enter')checkPw()">
    <button class="pw-btn" onclick="checkPw()">unlock</button>
    <div class="pw-cancel" onclick="closePw()">cancel</div>
  </div>
</div>

<div class="overlay-base" id="settings-overlay">
  <div class="settings-panel">
    <div class="sp-header"><div class="sp-title">Customize</div><div class="sp-close" onclick="closeSettings()">esc</div></div>
    <div class="sp-section">
      <div class="sp-section-title">Profile</div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:8px">
        <div><label class="sp-field-label">Username</label><input class="sp-input" id="sp-name" placeholder="snow" maxlength="24"></div>
        <div><label class="sp-field-label">Avatar fallback</label><input class="sp-input" id="sp-pfp" placeholder="pfp" maxlength="6"></div>
      </div>
      <div style="margin-bottom:8px"><label class="sp-field-label">Bio (typewriter)</label><input class="sp-input" id="sp-bio" placeholder="Fu*k Guns." maxlength="80"></div>
      <div style="margin-bottom:8px"><label class="sp-field-label">Tab title</label><input class="sp-input" id="sp-tab" placeholder="snow" maxlength="40"></div>
      <div><label class="sp-field-label">Status</label><select class="sp-input" id="sp-status" style="cursor:none"><option value="offline">Offline</option><option value="online">Online</option><option value="dnd">Do Not Disturb</option></select></div>
    </div>
    <div class="sp-section">
      <div class="sp-section-title">Badges</div>
      <div class="badge-grid" id="badge-grid"></div>
      <div class="badges-row-controls"><button class="badge-ctrl-btn" onclick="addBadgeSlot()">+ add badge</button><button class="badge-ctrl-btn" onclick="applyBadges()">preview</button></div>
    </div>
    <div class="sp-section">
      <div class="sp-section-title">Social Links</div>
      <div style="display:grid;gap:6px">
        <div class="icon-edit-row"><span class="icon-edit-label">GitHub</span><input class="icon-edit-input" id="link-github" placeholder="https://github.com/..." maxlength="120"></div>
        <div class="icon-edit-row"><span class="icon-edit-label">Discord</span><input class="icon-edit-input" id="link-discord" placeholder="https://discord.gg/..." maxlength="120"></div>
        <div class="icon-edit-row"><span class="icon-edit-label">Twitter / X</span><input class="icon-edit-input" id="link-twitter" placeholder="https://x.com/..." maxlength="120"></div>
        <div class="icon-edit-row"><span class="icon-edit-label">TikTok</span><input class="icon-edit-input" id="link-tiktok" placeholder="https://tiktok.com/@..." maxlength="120"></div>
      </div>
    </div>
    <div class="sp-section">
      <div class="sp-section-title">Slider Labels</div>
      <div class="icon-edit-row"><span class="icon-edit-label">Volume</span><span class="icon-edit-preview" id="prev-vol">vol</span><input class="icon-edit-input" id="edit-vol-icon" placeholder="vol" maxlength="6" oninput="document.getElementById('prev-vol').textContent=this.value||'vol'"></div>
      <div class="icon-edit-row"><span class="icon-edit-label">Brightness</span><span class="icon-edit-preview" id="prev-bright">dim</span><input class="icon-edit-input" id="edit-bright-icon" placeholder="dim" maxlength="6" oninput="document.getElementById('prev-bright').textContent=this.value||'dim'"></div>
    </div>
    <div class="sp-section">
      <div class="sp-section-title">Background Video</div>
      <input class="sp-input" id="sp-bgurl" placeholder="https://... (.mp4 / .webm)" style="margin-bottom:6px">
      <button class="sp-upload" onclick="document.getElementById('sp-bgfile').click()"><span>upload video file</span>.mp4 / .webm</button>
      <input type="file" id="sp-bgfile" accept="video/*" onchange="uploadBg(event)">
    </div>
    <div class="sp-section">
      <div class="sp-section-title">Music</div>
      <button class="sp-upload" onclick="document.getElementById('sp-songfiles').click()"><span>upload audio files</span>.mp3 .ogg .wav .m4a</button>
      <input type="file" id="sp-songfiles" accept="audio/*" multiple onchange="uploadSongs(event)">
      <div style="margin-top:12px">
        <div class="sp-section-title" style="font-size:.5rem;margin-bottom:8px">add song manually</div>
        <div class="song-add-form">
          <div class="song-form-row-with-img">
            <div><label class="sp-field-label">cover art</label><div class="song-cover-preview" id="song-cover-preview" onclick="document.getElementById('song-cover-file').click()"><span id="song-cover-text">add<br>img</span><img id="song-cover-img" src="" style="display:none" alt=""></div><input type="file" id="song-cover-file" accept="image/*" onchange="setSongCoverPreview(event)"></div>
            <div style="flex:1;display:grid;gap:6px">
              <div><label class="sp-field-label">title *</label><input class="sp-input" id="sp-songtitle" placeholder="Track name" maxlength="60"></div>
              <div><label class="sp-field-label">artist</label><input class="sp-input" id="sp-songartist" placeholder="Artist name" maxlength="60"></div>
            </div>
          </div>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:6px;margin-top:6px">
            <div><label class="sp-field-label">album</label><input class="sp-input" id="sp-songalbum" placeholder="Album name" maxlength="60"></div>
            <div><label class="sp-field-label">year</label><input class="sp-input" id="sp-songyear" placeholder="2024" maxlength="4"></div>
          </div>
          <div style="margin-top:6px"><label class="sp-field-label">audio url</label><div class="sp-row"><input class="sp-input" id="sp-songurl" placeholder="https://..."><button class="sp-add-btn" onclick="addSongUrl()">add</button></div></div>
        </div>
      </div>
      <div class="song-list-sp" id="song-list-sp" style="margin-top:10px"></div>
    </div>
    <div class="sp-section">
      <div class="sp-section-title">Security</div>
      <div class="sp-row"><input class="sp-input" type="password" id="sp-newpw" placeholder="New password..." maxlength="32"><button class="sp-add-btn" onclick="changePw()">set</button></div>
    </div>
    <button class="sp-save" onclick="saveSettings()">save &amp; publish changes</button>
    <p class="small-note" style="text-align:center;margin-top:8px">changes visible to all visitors</p>
  </div>
</div>

<script>
// ══════════════════════════════
//  CUSTOM CURSOR + PASTEL TRAIL
// ══════════════════════════════
const cursorDot = document.getElementById('cursor-dot');
const cursorRing = document.getElementById('cursor-ring');
let mouseX = innerWidth/2, mouseY = innerHeight/2;
let ringX = mouseX, ringY = mouseY;

const TRAIL = 22;
const trailCols = ['#9ecff0','#c4b0f0','#f0b8d8','#a8e8d8','#f0d0b0','#b3a4f0','#9ecff0','#f0b8d8'];
const trailDots = [];
for(let i=0;i<TRAIL;i++){
  const d=document.createElement('div'); d.className='trail-dot';
  const sz=Math.max(1.5, 7-(i*0.22));
  d.style.cssText=`width:${sz}px;height:${sz}px;opacity:0;background:${trailCols[i%trailCols.length]}`;
  document.body.appendChild(d);
  trailDots.push({el:d,x:mouseX,y:mouseY});
}

document.addEventListener('mousemove',e=>{ mouseX=e.clientX; mouseY=e.clientY; cursorDot.style.left=mouseX+'px'; cursorDot.style.top=mouseY+'px'; });

function loopCursor(){
  ringX+=(mouseX-ringX)*0.1; ringY+=(mouseY-ringY)*0.1;
  cursorRing.style.left=ringX+'px'; cursorRing.style.top=ringY+'px';
  for(let i=TRAIL-1;i>0;i--){ trailDots[i].x=trailDots[i-1].x; trailDots[i].y=trailDots[i-1].y; }
  trailDots[0].x=mouseX; trailDots[0].y=mouseY;
  trailDots.forEach((t,i)=>{
    t.el.style.opacity=(1-i/TRAIL)*0.55;
    t.el.style.left=t.x+'px'; t.el.style.top=t.y+'px';
    t.el.style.transform=`translate(-50%,-50%) scale(${Math.max(0.05,1-i*0.045)})`;
  });
  requestAnimationFrame(loopCursor);
}
loopCursor();

// ══════════════════════════════
//  PARALLAX TILT (Opera GX)
// ══════════════════════════════
const cardWrap=document.getElementById('card-wrap');
let tiltX=0,tiltY=0,floatA=0;
function loopTilt(){
  floatA+=0.016;
  const fy=Math.sin(floatA)*5, fx=Math.cos(floatA*0.65)*2.5;
  const cx=innerWidth/2, cy=innerHeight/2;
  const nx=(mouseX-cx)/cx, ny=(mouseY-cy)/cy;
  tiltX+=(ny*-13-tiltX)*0.065; tiltY+=(nx*13-tiltY)*0.065;
  cardWrap.style.transform=`translate(${nx*20+fx}px,${ny*14+fy}px) rotateX(${tiltX}deg) rotateY(${tiltY}deg)`;
  requestAnimationFrame(loopTilt);
}
loopTilt();

// ══════════════════════════════
//  STATE
// ══════════════════════════════
let OWNER_PW='twisted123', isAuthed=false;
let songs=[],curTrack=-1,playing=false,shuf=false,rep=false,muted=false;
const audio=new Audio();
let views=9360, badgeData=['owner','mod','vip','pro'], volLabel='vol', brightLabel='dim', currentStatus='offline';
let socialLinks={github:'#',discord:'#',twitter:'#',tiktok:'#'};
let pendingSongCoverBlob=null;

// ══════════════════════════════
//  PASTEL PARTICLE CANVAS
// ══════════════════════════════
const canvas=document.getElementById('bg-canvas'),ctx=canvas.getContext('2d');
let bgActive=true;
function resC(){canvas.width=innerWidth;canvas.height=innerHeight}
resC(); window.addEventListener('resize',resC);
const pcols=['#9ecff0','#c4b0f0','#f0b8d8','#a8e8d8','#f0d0b0','#b3a4f0'];
const pts=Array.from({length:65},()=>({x:Math.random()*canvas.width,y:Math.random()*canvas.height,vx:(Math.random()-.5)*.28,vy:(Math.random()-.5)*.28,r:Math.random()*1.7+.35,c:pcols[Math.floor(Math.random()*pcols.length)]}));
(function drawBg(){
  if(!bgActive)return;
  ctx.fillStyle='#0d0f1a'; ctx.fillRect(0,0,canvas.width,canvas.height);
  pts.forEach((p,i)=>{
    pts.slice(i+1).forEach(q=>{ const d=Math.hypot(p.x-q.x,p.y-q.y); if(d<110){ctx.strokeStyle=`rgba(196,176,240,${.038*(1-d/110)})`;ctx.lineWidth=.5;ctx.beginPath();ctx.moveTo(p.x,p.y);ctx.lineTo(q.x,q.y);ctx.stroke()} });
    ctx.globalAlpha=.28;ctx.shadowBlur=12;ctx.shadowColor=p.c;ctx.fillStyle=p.c;ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();ctx.globalAlpha=1;ctx.shadowBlur=0;
    p.x+=p.vx;p.y+=p.vy;if(p.x<0||p.x>canvas.width)p.vx*=-1;if(p.y<0||p.y>canvas.height)p.vy*=-1;
  });
  requestAnimationFrame(drawBg);
})();

// ══════════════════════════════
//  TAB & BIO TYPEWRITER
// ══════════════════════════════
let tabTexts=['twstd'],tIdx=0,tCh=0,tDel=false;
function runTypeTab(){const t=tabTexts[tIdx%tabTexts.length];if(!tDel){tCh++;const c=t.slice(0,tCh);document.title=c+'|';setTimeout(()=>{document.title=c;if(tCh>=t.length){tDel=true;setTimeout(runTypeTab,2200)}else setTimeout(runTypeTab,155)},115)}else{tCh--;const c=t.slice(0,tCh);document.title=c.length?c:'|';if(tCh<=0){tDel=false;tIdx++;setTimeout(runTypeTab,650)}else setTimeout(runTypeTab,85)}}
runTypeTab();
let bioTexts=[" T W I S T E D"],bIdx=0,bCh=0,bDel=false;
function typeBio(){const t=bioTexts[bIdx%bioTexts.length],el=document.getElementById('bio-text');if(!bDel){el.textContent=t.slice(0,++bCh);if(bCh>=t.length){bDel=true;setTimeout(typeBio,3200)}else setTimeout(typeBio,110)}else{el.textContent=t.slice(0,--bCh);if(bCh<=0){bDel=false;bIdx++;setTimeout(typeBio,600)}else setTimeout(typeBio,55)}}
setTimeout(typeBio,1000);

// ══════════════════════════════
//  EQ
// ══════════════════════════════
const eqEl=document.getElementById('eq-el');
for(let i=0;i<7;i++){const b=document.createElement('div');b.className='eq-b';b.style.height='2px';eqEl.appendChild(b)}
(function aniEQ(){eqEl.querySelectorAll('.eq-b').forEach(b=>{b.style.height=(playing?Math.random()*12+2:2)+'px';b.style.opacity=playing?.35+Math.random()*.65:.22});setTimeout(aniEQ,playing?110:900)})();

// ══════════════════════════════
//  MUSIC
// ══════════════════════════════
function updateAlbumDisplay(s){const c=document.getElementById('album-cover-display'),ini=document.getElementById('album-initials-el');if(s&&s.coverSrc){c.src=s.coverSrc;c.style.display='block';ini.style.display='none'}else if(s){c.style.display='none';ini.style.display='flex';const p=[(s.artist||'').split(' ')[0]?.[0]||'',(s.album||s.name||'').split(' ')[0]?.[0]||''].filter(Boolean);ini.textContent=p.length?p.join('').toUpperCase():'--'}else{c.style.display='none';ini.style.display='flex';ini.textContent='--'}}
function renderSelector(){const el=document.getElementById('song-selector');el.innerHTML='';songs.forEach((s,i)=>{const d=document.createElement('div');d.className='song-dot'+(i===curTrack?' active':'');d.textContent=String(i+1).padStart(2,'0');d.title=s.name;d.onclick=()=>playTrack(i);el.appendChild(d)});if(!songs.length)el.innerHTML='<span style="font-family:\'Geist Mono\',monospace;font-size:.56rem;color:var(--muted);letter-spacing:1px;text-transform:uppercase">no songs — add via settings</span>'}
function loadTrack(i){if(!songs[i])return;curTrack=i;const s=songs[i];audio.src=s.url;audio.volume=document.getElementById('vol-sl').value/100;document.getElementById('track-title-el').textContent=s.name;document.getElementById('track-artist-el').textContent=s.artist||'unknown artist';document.getElementById('track-album-el').textContent=s.album?(s.album+(s.year?' · '+s.year:'')):'';document.getElementById('prog-fill').style.width='0%';document.getElementById('t-cur').textContent='0:00';updateAlbumDisplay(s);renderSelector()}
function playTrack(i){loadTrack(i);audio.play().then(()=>{playing=true;updPP()}).catch(()=>toast('click play — browser policy'))}
function togglePlay(){if(!songs.length){requestAccess();return}if(curTrack===-1){playTrack(0);return}if(playing){audio.pause();playing=false}else{audio.play();playing=true}updPP()}
function updPP(){document.getElementById('pp-icon').innerHTML=playing?'<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>':'<path d="M8 5v14l11-7z"/>';document.getElementById('album-art-el').className='album'+(playing?' playing':'')}
function nextTrack(){if(!songs.length)return;playTrack(shuf?Math.floor(Math.random()*songs.length):(curTrack+1)%songs.length)}
function prevTrack(){if(!songs.length)return;if(audio.currentTime>3){audio.currentTime=0;return}playTrack((curTrack-1+songs.length)%songs.length)}
function toggleShuffle(){shuf=!shuf;document.getElementById('shuffle-c').className='ctrl'+(shuf?' on':'')}
function toggleRepeat(){rep=!rep;document.getElementById('repeat-c').className='ctrl'+(rep?' on':'')}
function setVol(v){audio.volume=v/100;muted=v==0;document.getElementById('vol-label').textContent=v==0?'mute':v<40?'low':volLabel}
function toggleMute(){muted=!muted;if(muted){audio.volume=0;document.getElementById('vol-sl').value=0;document.getElementById('vol-label').textContent='mute'}else{audio.volume=.7;document.getElementById('vol-sl').value=70;document.getElementById('vol-label').textContent=volLabel}}
function seekAudio(e,el){if(!audio.duration)return;const r=el.querySelector('.prog-track').getBoundingClientRect();audio.currentTime=((e.clientX-r.left)/r.width)*audio.duration}
function setBrightness(v){document.querySelector('.bg-overlay').style.opacity=.4+(1-v/100)*.6}
audio.addEventListener('timeupdate',()=>{if(!audio.duration)return;document.getElementById('prog-fill').style.width=(audio.currentTime/audio.duration*100)+'%';document.getElementById('t-cur').textContent=fmt(audio.currentTime);document.getElementById('t-total').textContent=fmt(audio.duration)});
audio.addEventListener('ended',()=>{if(rep){audio.currentTime=0;audio.play()}else nextTrack()});
function fmt(s){if(!s||isNaN(s))return'0:00';return Math.floor(s/60)+':'+String(Math.floor(s%60)).padStart(2,'0')}

// ══════════════════════════════
//  PASSWORD
// ══════════════════════════════
function requestAccess(){if(isAuthed){openSettings();return}document.getElementById('pw-input').value='';document.getElementById('pw-error').textContent='';document.getElementById('pw-overlay').classList.add('open');setTimeout(()=>document.getElementById('pw-input').focus(),80)}
function checkPw(){const v=document.getElementById('pw-input').value;if(v===OWNER_PW){isAuthed=true;document.getElementById('pw-overlay').classList.remove('open');openSettings()}else{const i=document.getElementById('pw-input');i.classList.remove('shake');void i.offsetWidth;i.classList.add('shake');document.getElementById('pw-error').textContent='incorrect password';setTimeout(()=>{i.classList.remove('shake');document.getElementById('pw-error').textContent=''},2000)}}
function closePw(){document.getElementById('pw-overlay').classList.remove('open')}
function changePw(){const n=document.getElementById('sp-newpw').value.trim();if(!n){toast('enter a new password');return}OWNER_PW=n;document.getElementById('sp-newpw').value='';toast('password updated')}

// ══════════════════════════════
//  BADGE EDITOR
// ══════════════════════════════
function renderBadgeGrid(){
  const g=document.getElementById('badge-grid');
  if(!g) return;
  g.innerHTML='';
  badgeData.forEach((b,i)=>{
    const s=document.createElement('div');
    s.className='badge-slot';
    s.innerHTML=`<div class="badge-slot-preview" id="bprev-${i}">${b||'?'}</div><input class="badge-slot-input" id="binp-${i}" value="${b}" placeholder="text" maxlength="10" oninput="document.getElementById('bprev-${i}').textContent=this.value||'?'"><button class="badge-rm-btn" onclick="rmBadge(${i})">x</button>`;
    g.appendChild(s);
  })
}
function addBadgeSlot(){badgeData.push('new');renderBadgeGrid()}
function rmBadge(i){badgeData.splice(i,1);renderBadgeGrid();applyBadges()}
function applyBadges(){badgeData=Array.from(document.querySelectorAll('[id^="binp-"]')).map(e=>e.value.trim()).filter(Boolean);renderBadgesOnCard();toast('badges updated')}
function setSongCoverPreview(e){const f=e.target.files[0];if(!f)return;pendingSongCoverBlob=f;const i=document.getElementById('song-cover-img');i.src=URL.createObjectURL(f);i.style.display='block';document.getElementById('song-cover-text').style.display='none'}

// ══════════════════════════════
//  SETTINGS
// ══════════════════════════════
function openSettings(){
  document.getElementById('settings-overlay').classList.add('open');
  document.getElementById('sp-name').value=document.getElementById('username-el').textContent;
  document.getElementById('sp-bio').value=bioTexts[0]||'';
  document.getElementById('sp-tab').value=tabTexts[0]||'';
  document.getElementById('sp-status').value=currentStatus;
  document.getElementById('edit-vol-icon').value=volLabel;
  document.getElementById('edit-bright-icon').value=brightLabel;
  document.getElementById('prev-vol').textContent=volLabel;
  document.getElementById('prev-bright').textContent=brightLabel;
  document.getElementById('link-github').value=socialLinks.github==='#'?'':socialLinks.github;
  document.getElementById('link-discord').value=socialLinks.discord==='#'?'':socialLinks.discord;
  document.getElementById('link-twitter').value=socialLinks.twitter==='#'?'':socialLinks.twitter;
  document.getElementById('link-tiktok').value=socialLinks.tiktok==='#'?'':socialLinks.tiktok;
  renderBadgeGrid();renderSongListSP();
}
function closeSettings(){document.getElementById('settings-overlay').classList.remove('open')}
function saveSettings(){
  const name=document.getElementById('sp-name').value.trim()||'snow';
  const bio=document.getElementById('sp-bio').value.trim();
  const tab=document.getElementById('sp-tab').value.trim()||name;
  const status=document.getElementById('sp-status').value;
  const pfp=document.getElementById('sp-pfp').value.trim();
  const bgurl=document.getElementById('sp-bgurl').value.trim();
  const nv=document.getElementById('edit-vol-icon').value.trim();
  const nb=document.getElementById('edit-bright-icon').value.trim();
  document.getElementById('username-el').textContent=name;
  if(bio){bioTexts=[bio];bIdx=0;bCh=0;bDel=false;document.getElementById('bio-text').textContent='';setTimeout(typeBio,400)}
  if(tab){tabTexts=[tab];tIdx=0;tCh=0;tDel=false;setTimeout(runTypeTab,400)}
  if(pfp)document.getElementById('avatar-fallback').textContent=pfp;
  if(nv){volLabel=nv;document.getElementById('vol-label').textContent=nv}
  if(nb){brightLabel=nb;document.getElementById('bright-label').textContent=nb}
  const gv=id=>{const x=document.getElementById(id).value.trim();return x||'#'};
  socialLinks={github:gv('link-github'),discord:gv('link-discord'),twitter:gv('link-twitter'),tiktok:gv('link-tiktok')};
  ['github','discord','twitter','tiktok'].forEach(k=>document.getElementById('s-'+k).href=socialLinks[k]);
  applyBadges();
  const sc={offline:'#f0a8b4',online:'#a8f0c6',dnd:'#f0d8a0'};const col=sc[status]||'#f0a8b4';
  currentStatus=status;document.getElementById('status-dot').style.background=col;document.getElementById('status-dot2').style.background=col;
  document.getElementById('status-text-el').textContent=status==='dnd'?'do not disturb':status;
  if(bgurl)setVideo(bgurl);
  views+=Math.floor(Math.random()*10)+1;document.getElementById('view-num').textContent=views.toLocaleString();
  saveToStorage();closeSettings();toast('saved & published to all viewers');
}
function setAvatar(e){const f=e.target.files[0];if(!f)return;const i=document.getElementById('avatar-img-el');i.src=URL.createObjectURL(f);i.style.display='block';document.getElementById('avatar-fallback').style.display='none'}
function setVideo(url){const v=document.getElementById('bg-video');v.src=url;v.style.display='block';bgActive=false;canvas.style.display='none'}
function uploadBg(e){const f=e.target.files[0];if(!f)return;setVideo(URL.createObjectURL(f));toast('video background set')}
function uploadSongs(e){Array.from(e.target.files).forEach(f=>{songs.push({url:URL.createObjectURL(f),name:f.name.replace(/\.[^.]+$/,''),artist:'',album:'',year:'',coverSrc:''})});renderSelector();renderSongListSP();if(curTrack===-1&&songs.length)loadTrack(0);toast(e.target.files.length+' song(s) added')}
function addSongUrl(){const url=document.getElementById('sp-songurl').value.trim();if(!url)return;const t=document.getElementById('sp-songtitle').value.trim()||url.split('/').pop().replace(/\.[^.]+$/,'')||'Track '+(songs.length+1);let cs='';if(pendingSongCoverBlob)cs=URL.createObjectURL(pendingSongCoverBlob);songs.push({url,name:t,artist:document.getElementById('sp-songartist').value.trim(),album:document.getElementById('sp-songalbum').value.trim(),year:document.getElementById('sp-songyear').value.trim(),coverSrc:cs});['sp-songurl','sp-songtitle','sp-songartist','sp-songalbum','sp-songyear'].forEach(id=>document.getElementById(id).value='');pendingSongCoverBlob=null;document.getElementById('song-cover-img').style.display='none';document.getElementById('song-cover-text').style.display='';renderSelector();renderSongListSP();if(curTrack===-1)loadTrack(0);toast('song added')}
function removeSong(i){songs.splice(i,1);if(curTrack>=songs.length)curTrack=songs.length-1;renderSelector();renderSongListSP()}
function renderSongListSP(){const el=document.getElementById('song-list-sp');el.innerHTML='';songs.forEach((s,i)=>{const d=document.createElement('div');d.className='song-sp-row';const m=[s.artist,s.album,s.year].filter(Boolean).join(' · ')||'no metadata';d.innerHTML=`<span class="song-sp-num">${String(i+1).padStart(2,'0')}</span><div class="song-sp-info"><div class="song-sp-title">${s.name}</div><div class="song-sp-meta">${m}</div></div><button class="song-sp-rm" onclick="removeSong(${i})">rm</button>`;el.appendChild(d)});if(!songs.length)el.innerHTML='<div style="font-family:\'Geist Mono\',monospace;font-size:.62rem;color:var(--muted);padding:6px 0;letter-spacing:1px;text-transform:uppercase">no songs yet</div>'}

// ══════════════════════════════
//  SHARED STORAGE
// ══════════════════════════════
async function saveToStorage(){
  const data={
    username:document.getElementById('username-el').textContent,
    bio:bioTexts[0]||'',
    tab:tabTexts[0]||'',
    status:currentStatus,
    badges:badgeData,
    volLabel,brightLabel,views,
    pfpText:document.getElementById('avatar-fallback').textContent,
    avatarSrc:document.getElementById('avatar-img-el').src||'',
    socialLinks,
    songs:songs.filter(s=>!s.url.startsWith('blob:')).map(s=>({url:s.url,name:s.name,artist:s.artist,album:s.album,year:s.year,coverSrc:s.coverSrc&&!s.coverSrc.startsWith('blob:')?s.coverSrc:''})),
    bgVideoUrl:(!document.getElementById('bg-video').src.startsWith('blob:')?document.getElementById('bg-video').src:'')||''
  };
  try{
    await fetch('/api/profile', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
  }catch(e){
    console.warn('Save failed', e);
  }
}
async function loadFromStorage(){
  try{
    const res = await fetch('/api/profile');
    if(!res.ok) return;
    const d = await res.json();
    if(!d) return;
    if(d.username) document.getElementById('username-el').textContent=d.username;
    if(d.bio) bioTexts=[d.bio];
    if(d.tab) tabTexts=[d.tab];
    if(d.badges&&d.badges.length){ badgeData=d.badges; renderBadgesOnCard(); }
    if(d.volLabel){ volLabel=d.volLabel; document.getElementById('vol-label').textContent=d.volLabel }
    if(d.brightLabel){ brightLabel=d.brightLabel; document.getElementById('bright-label').textContent=d.brightLabel }
    if(d.views) views=d.views;
    if(d.pfpText) document.getElementById('avatar-fallback').textContent=d.pfpText;
    if(d.avatarSrc&&d.avatarSrc.length>10&&!d.avatarSrc.startsWith('blob:')){ const i=document.getElementById('avatar-img-el'); i.src=d.avatarSrc; i.style.display='block'; document.getElementById('avatar-fallback').style.display='none' }
    if(d.songs&&d.songs.length){ songs=[...d.songs]; renderSelector(); loadTrack(0) }
    if(d.bgVideoUrl&&d.bgVideoUrl.length>8) setVideo(d.bgVideoUrl);
    if(d.status){ currentStatus=d.status; const sc={offline:'#f0a8b4',online:'#a8f0c6',dnd:'#f0d8a0'}; const col=sc[d.status]||'#f0a8b4'; document.getElementById('status-dot').style.background=col; document.getElementById('status-dot2').style.background=col; document.getElementById('status-text-el').textContent=d.status==='dnd'?'do not disturb':d.status }
    if(d.socialLinks){ socialLinks=d.socialLinks; ['github','discord','twitter','tiktok'].forEach(k=>document.getElementById('s-'+k).href=socialLinks[k]||'#') }
  }catch(e){}
}
function renderBadgesOnCard(){
  const el=document.getElementById('badges-el');
  if(!el) return;
  el.innerHTML='';
  badgeData.forEach(b=>{
    const s=document.createElement('span');
    s.className='badge';
    s.textContent=b;
    el.appendChild(s);
  })
}
document.getElementById('avatar-outer').onclick=()=>{if(isAuthed)document.getElementById('avatar-file').click()};
function toast(msg){const ex=document.querySelector('.toast');if(ex)ex.remove();const el=document.createElement('div');el.className='toast';el.textContent=msg;document.body.appendChild(el);setTimeout(()=>el.remove(),2700)}
document.addEventListener('keydown',e=>{const tag=document.activeElement.tagName;if(tag==='INPUT'||tag==='SELECT')return;if(e.code==='Space'){e.preventDefault();togglePlay()}if(e.code==='ArrowRight')nextTrack();if(e.code==='ArrowLeft')prevTrack();if(e.key==='Escape'){closeSettings();closePw()}});
document.getElementById('pw-overlay').addEventListener('click',e=>{if(e.target===document.getElementById('pw-overlay'))closePw()});
document.getElementById('settings-overlay').addEventListener('click',e=>{if(e.target===document.getElementById('settings-overlay'))closeSettings()});
renderSelector();
(async()=>{await loadFromStorage();views++;document.getElementById('view-num').textContent=views.toLocaleString();await saveToStorage()})();

// ══════════════════════════════
//  LANYARD — DISCORD PRESENCE
// ══════════════════════════════
const DISCORD_ID = '1240409640647266314';
let lanyardWS = null, lanyardHB = null, spotifyInterval = null;
let spotifyTimestamps = null;

const dcStatusColors = {
  online: '#a8f0c6',
  idle:   '#f0d8a0',
  dnd:    '#f0a8b4',
  offline:'#6680a8'
};

function showEl(id){ document.getElementById(id).classList.remove('hidden'); }
function hideEl(id){ document.getElementById(id).classList.add('hidden'); }

function fmtMs(ms){ if(!ms||ms<0) return'0:00'; const s=Math.floor(ms/1000); return Math.floor(s/60)+':'+String(s%60).padStart(2,'0'); }

function updateSpotifyProgress(){
  if(!spotifyTimestamps) return;
  const now = Date.now();
  const elapsed = now - spotifyTimestamps.start;
  const total   = spotifyTimestamps.end - spotifyTimestamps.start;
  const pct     = Math.min(100, (elapsed/total)*100);
  document.getElementById('spotify-prog').style.width = pct+'%';
  document.getElementById('spotify-t-cur').textContent  = fmtMs(elapsed);
  document.getElementById('spotify-t-total').textContent = fmtMs(total);
}

function applyPresence(data){
  // ── Status dot ──
  const status = data.discord_status || 'offline';
  const col = dcStatusColors[status] || dcStatusColors.offline;
  document.getElementById('presence-dc-dot').style.background = col;

  // Also sync the profile status to Discord status
  document.getElementById('status-dot').style.background = col;
  document.getElementById('status-dot2').style.background = col;
  const statusLabels = { online:'online', idle:'idle', dnd:'do not disturb', offline:'offline' };
  document.getElementById('status-text-el').textContent = statusLabels[status] || status;

  // ── Custom status ──
  const customAct = (data.activities||[]).find(a=>a.type===4);
  if(customAct && (customAct.state || customAct.emoji?.name)){
    const txt = [customAct.emoji?.name, customAct.state].filter(Boolean).join(' ');
    document.getElementById('act-custom-text').textContent = txt;
    showEl('act-custom');
  } else { hideEl('act-custom'); }

  // ── Spotify ──
  clearInterval(spotifyInterval);
  if(data.listening_to_spotify && data.spotify){
    const sp = data.spotify;
    document.getElementById('spotify-song').textContent   = sp.song;
    document.getElementById('spotify-artist').textContent = sp.artist ? 'by ' + sp.artist : '';
    const albumArt = document.getElementById('spotify-album-art');
    albumArt.src = sp.album_art_url || '';
    spotifyTimestamps = sp.timestamps || null;
    updateSpotifyProgress();
    spotifyInterval = setInterval(updateSpotifyProgress, 1000);
    showEl('act-spotify');
  } else {
    spotifyTimestamps = null;
    hideEl('act-spotify');
  }

  // ── Game / App activity (type 0 = playing, type 1 = streaming, type 2 = listening, type 3 = watching) ──
  const gameAct = (data.activities||[]).find(a=>a.type===0||a.type===1||a.type===3);
  if(gameAct){
    document.getElementById('act-game-name').textContent   = gameAct.name || '';
    document.getElementById('act-game-detail').textContent = gameAct.details || '';
    document.getElementById('act-game-state').textContent  = gameAct.state || '';

    // Try to load activity image from Discord CDN
    const imgEl    = document.getElementById('act-game-img');
    const initials = document.getElementById('act-game-initials');
    const appId    = gameAct.application_id;
    const largeImg = gameAct.assets?.large_image;

    if(appId && largeImg){
      // Could be a cdn hash or external link
      const imgSrc = largeImg.startsWith('mp:external/')
        ? 'https://media.discordapp.net/external/'+largeImg.replace('mp:external/','')
        : `https://cdn.discordapp.com/app-assets/${appId}/${largeImg}.png`;
      imgEl.src = imgSrc;
      imgEl.style.display = 'block';
      initials.style.display = 'none';
      imgEl.onerror = ()=>{ imgEl.style.display='none'; initials.style.display=''; initials.textContent=(gameAct.name||'?').slice(0,3).toUpperCase(); };
    } else {
      imgEl.style.display = 'none';
      initials.style.display = '';
      initials.textContent = (gameAct.name||'?').slice(0,3).toUpperCase();
    }
    showEl('act-game');
  } else { hideEl('act-game'); }

  // ── Idle fallback ──
  const hasActivity = data.listening_to_spotify || !!gameAct;
  document.getElementById('act-idle').style.display = hasActivity ? 'none' : '';
}

function connectLanyard(){
  if(lanyardWS){ lanyardWS.close(); }
  lanyardWS = new WebSocket('wss://api.lanyard.rest/socket');

  lanyardWS.onopen = ()=>{};

  lanyardWS.onmessage = e=>{
    const msg = JSON.parse(e.data);
    // op 1 = hello (send heartbeat interval)
    if(msg.op===1){
      const interval = msg.d.heartbeat_interval;
      clearInterval(lanyardHB);
      lanyardHB = setInterval(()=>{ if(lanyardWS.readyState===1) lanyardWS.send(JSON.stringify({op:3})); }, interval);
      // Subscribe to user
      lanyardWS.send(JSON.stringify({ op:2, d:{ subscribe_to_id: DISCORD_ID } }));
    }
    // op 0 = event
    if(msg.op===0){
      if(msg.t==='INIT_STATE' || msg.t==='PRESENCE_UPDATE'){
        const data = msg.t==='INIT_STATE' ? msg.d[DISCORD_ID] : msg.d;
        if(data) applyPresence(data);
      }
    }
  };

  lanyardWS.onclose = ()=>{
    clearInterval(lanyardHB);
    // Reconnect after 5s
    setTimeout(connectLanyard, 5000);
  };

  lanyardWS.onerror = ()=>{ lanyardWS.close(); };
}

// Initial REST fetch for instant data, then open WS
fetch(`https://api.lanyard.rest/v1/users/${DISCORD_ID}`)
  .then(r=>r.json())
  .then(j=>{ if(j.success && j.data) applyPresence(j.data); })
  .catch(()=>{});
connectLanyard();
</script>
</body>
</html>



<html>
<head>
    <meta charset="UTF-8">
    <title>Transparent Light Blue Text at Bottom</title>
    <style>
        body {
            background-color: #111; /* Dark background for contrast */
            margin: 0;
            height: 100vh;
        }
        .transparent-text {
            position: fixed;
            bottom: 10px; /* Distance from bottom */
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            font-weight: bold;
            color: rgba(173, 216, 230, 0.5); /* Light blue with 50% transparency */
            font-family: Arial, sans-serif;
            text-shadow: 0 0 10px rgba(173, 216, 230, 0.7); /* Optional glow effect */
        }
    </style>
</head>
<body>

    <div class="transparent-text">@twistedtbh</div>

</body>
</html>